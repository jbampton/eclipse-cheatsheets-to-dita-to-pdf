<?xml version="1.0" encoding="utf-8"?><!-- This file is part of the DITA Open Toolkit project hosted on 
     Sourceforge.net. See the accompanying license.txt file for 
     applicable licenses.--><!-- (c) Copyright IBM Corp. 2006 All Rights Reserved. --><project name="DOST" default="init">
  
  <property file="${basedir}/local.properties"></property>
  
  <!-- Initialize DITA-OT base directory -->
  <dirname property="ant.file.DOST.dir" file="${ant.file.DOST}"></dirname>
  <condition property="dita.dir" value="${ant.file.DOST.dir}">
    <not>
      <isset property="dita.dir"></isset>
    </not>
  </condition>
  <condition property="dita.dir" value="${basedir}">
    <not>
      <isset property="dita.dir"></isset>
    </not>
  </condition>
    
  <path id="dost.class.path">
    
<pathelement location="${dita.dir}${file.separator}plugins/org.dita.pdf2/lib/fo.jar"/>
<pathelement location="${dita.dir}${file.separator}plugins/org.dita.pdf2.xep/lib/xep.jar"/>
<pathelement location="${dita.dir}${file.separator}plugins/org.dita.pdf2.axf/lib/axf.jar"/>
    <pathelement location="${dita.dir}/lib/dost.jar"></pathelement>
    <pathelement location="${dita.dir}/lib/dost-configuration.jar"></pathelement>
  </path>
  
  <target name="init">
    <dita-ot-fail id="DOTA001F">
      <condition>
        <and>
          <not><equals arg1="${transtype}" arg2="troff" casesensitive="false"/></not><not><equals arg1="${transtype}" arg2="debrief" casesensitive="false"/></not>
        </and>
      </condition>
      <param name="1" value="${transtype}"></param>
    </dita-ot-fail>
    <condition property="clean.temp" value="true">
      <not><isset property="clean.temp"></isset></not>
    </condition>
    <condition property="clean-temp.skip">
      <isfalse value="${clean.temp}"></isfalse>
    </condition>
    <antcall>
      <target name="dita2${transtype}"></target>
      <target name="clean-temp"></target>
    </antcall>
  </target>
  
  <property name='dita.plugin.org.dita.htmlhelp.dir' location='${dita.dir}/plugins/org.dita.htmlhelp'/><property name='dita.plugin.org.dita.base.dir' location='${dita.dir}'/><property name='dita.plugin.org.dita.pdf2.xep.dir' location='${dita.dir}/plugins/org.dita.pdf2.xep'/><property name='dita.plugin.com.sophos.tocjs.dir' location='${dita.dir}/plugins/com.sophos.tocjs'/><property name='dita.plugin.org.dita.eclipsehelp.dir' location='${dita.dir}/plugins/org.dita.eclipsehelp'/><property name='dita.plugin.org.dita.pdf2.fop.dir' location='${dita.dir}/plugins/org.dita.pdf2.fop'/><property name='dita.plugin.org.dita.specialization.dita11.dir' location='${dita.dir}/plugins/org.dita.specialization.dita11'/><property name='dita.plugin.org.dita.troff.dir' location='${dita.dir}/plugins/org.dita.troff'/><property name='dita.plugin.org.dita.eclipsecontent.dir' location='${dita.dir}/plugins/org.dita.eclipsecontent'/><property name='dita.plugin.info.debrief.dir' location='${dita.dir}/plugins/info.debrief'/><property name='dita.plugin.org.dita.pdf2.axf.dir' location='${dita.dir}/plugins/org.dita.pdf2.axf'/><property name='dita.plugin.org.dita.html5.dir' location='${dita.dir}/plugins/org.dita.html5'/><property name='dita.plugin.org.dita.javahelp.dir' location='${dita.dir}/plugins/org.dita.javahelp'/><property name='dita.plugin.org.dita.specialization.eclipsemap.dir' location='${dita.dir}/plugins/org.dita.specialization.eclipsemap'/><property name='dita.plugin.org.dita.wordrtf.dir' location='${dita.dir}/plugins/org.dita.wordrtf'/><property name='dita.plugin.org.dita.xhtml.dir' location='${dita.dir}/plugins/org.dita.xhtml'/><property name='dita.plugin.org.dita.odt.dir' location='${dita.dir}/plugins/org.dita.odt'/><property name='dita.plugin.org.dita.docbook.dir' location='${dita.dir}/plugins/org.dita.docbook'/><property name='dita.plugin.org.oasis-open.dita.v1_2.dir' location='${dita.dir}/plugins/org.oasis-open.dita.v1_2'/><property name='dita.plugin.org.dita.pdf2.dir' location='${dita.dir}/plugins/org.dita.pdf2'/><property name='dita.plugin.org.oasis-open.dita.v1_3.dir' location='${dita.dir}/plugins/org.oasis-open.dita.v1_3'/>
  <!-- 
  This file is part of the DITA Open Toolkit project hosted on
  Sourceforge.net. See the accompanying license.txt file for
  applicable licenses.
  
  (C) Copyright Shawn McKenzie, 2007. All Rights Reserved.

  UPDATES:
    20110817 RDA: Several changes:
        * Use property dita.plugin.com.sophos.tocjs.dir (remove hard-coded demo/ dir)
        * Original design only works if $output.file is set in an Ant file, and
          if XHTML is created independently. Refactoring to use that original
          processing when $output.file is specified; otherwise:
          1) Return HTML files along with navigation
          2) Return default frameset (with name based on map name)
          3) Set $output.file to a default value of toctree.js
          4) Return supporting JS and CSS files for the default frameset
  *-->

  
<target name="dita2tocjs" depends="build-init, preprocess, tocjsInit, map2tocjs, topic2tocjs, tocjsDefaultOutput">
  </target>

  
<target name="tocjsInit">
    
<property name="html-version" value="xhtml"></property>
    
<condition property="dita.plugin.com.sophos.tocjs.copydefaults" value="true">
        
<not>
            
<isset property="output.file"></isset>
        </not>
    </condition>
    
<property name="output.file" value="${output.dir}${file.separator}toctree.js"></property>
    
<property name="out.ext" value=".html"></property>
  </target>

  
<target name="topic2tocjs" if="noMap">
    
<antcall target="dita.map.tocjs">
      <!-- No real support for tocjs on a single topic, only for map -->
    </antcall>
    
<echo>The TocJS output type only supports ditamap files as input.</echo>
  </target>

  
<target name="map2tocjs" unless="noMap">
    
<antcall target="dita.map.tocjs">
      
<param name="input" value="${dita.temp.dir}${file.separator}${user.input.file}"></param>
    </antcall>
  </target>

  
<target name="dita.map.tocjs" description="generate merged for tocjs">
    
<xslt in="${input}" out="${output.file}" style="${dita.plugin.com.sophos.tocjs.dir}/xsl/tocjs.xsl">
      
<param name="contentwin" expression="${content.frame}" if="content.frame"></param>
      
<param name="htmlext" expression="${out.ext}"></param>
      
<xmlcatalog refid="dita.catalog"></xmlcatalog>
    </xslt>
  </target>

  
<target name="tocjsDefaultOutput" if="dita.plugin.com.sophos.tocjs.copydefaults">
      <!-- Create usable output for people trying tocjs for the first time -->
      
<antcall target="tocjsDefaultXhtmlOutput"></antcall>
      
<antcall target="tocjsDefaultFrameset"></antcall>
      <!-- Copy default JS and related files -->
      
<copy todir="${output.dir}">
<fileset dir="${dita.plugin.com.sophos.tocjs.dir}${file.separator}basefiles">
<include name="**/*"></include></fileset></copy>
  </target>

  
<target name="tocjsDefaultXhtmlOutput" depends="copy-revflag, xhtml.topics, copy-css">
      <!-- Preprocess has already completed based on original dependencies;
           this target continues to XHTML for default output. Seems very 
           indirect way to create the XHTML, so would like something better,
           but do not want to add new XHTML processing for people using
           the original dita2tocjs target. -->
  </target>

  
<target name="tocjsDefaultFrameset" if="dita.plugin.com.sophos.tocjs.copydefaults">
      <!-- Create the default frameset itself -->
      
<xslt basedir="${dita.temp.dir}" destdir="${output.dir}" includesfile="${dita.temp.dir}${file.separator}${user.input.file.listfile}" extension="${out.ext}" style="${dita.plugin.com.sophos.tocjs.dir}${file.separator}xsl${file.separator}frameset.xsl">
  	    
<excludesfile name="${dita.temp.dir}${file.separator}${resourceonlyfile}" if="resourceonlyfile"></excludesfile>
        
<param name="OUTEXT" expression="${out.ext}" if="out.ext"></param>
        
<param name="CSSPATH" expression="${CSSPATH}" if="csspath"></param>
        
<xmlcatalog refid="dita.catalog"></xmlcatalog>
      </xslt>
  </target>

<!-- This file is part of the DITA Open Toolkit project hosted on 
    Sourceforge.net. See the accompanying license.txt file for 
    applicable licenses.--><!--
    | (C) Copyright IBM Corporation 2006. All Rights Reserved.
    *-->
  
  <!--property name="dita.eclipse.plugin" value="no"/-->
    

  <!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.xhtml/build_general.xml"></import>
  
<import file="plugins/org.dita.xhtml/build_dita2xhtml.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.htmlhelp/build_dita2htmlhelp.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.base/build_init.xml"></import>
  
<import file="plugins/org.dita.base/build_preprocess.xml"></import>


  
<import file="plugins/org.dita.pdf2/build.xml"></import>


  
<import file="plugins/org.dita.pdf2.xep/build_xep.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.eclipsehelp/build_dita2eclipsehelp.xml"></import>

  
<import file="plugins/org.dita.pdf2.fop/build_fop.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.troff/build_dita2troff.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.eclipsecontent/build_dita2eclipsecontent.xml"></import>

  
<target name="debrief.init">
    
<property name="customization.dir" location="${dita.plugin.info.debrief.dir}/cfg"></property>
  </target>
  
<target name="dita2debrief" depends="debrief.init, dita2pdf2"></target>

  
<import file="plugins/org.dita.pdf2.axf/build_axf.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.html5/build_dita2html5.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.javahelp/build_dita2javahelp.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.wordrtf/build_dita2wordrtf.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.odt/build_dita2odt.xml"></import>
<!--
  This file is part of the DITA Open Toolkit project.
  See the accompanying license.txt file for applicable licenses.
-->
  
<import file="plugins/org.dita.docbook/build_dita2docbook.xml"></import>

  
  <!-- Deprecated since 2.1 -->
  <target name="help">
    <echo level="info">See http://www.dita-ot.org/${otrelease}/</echo>
  </target>

</project>